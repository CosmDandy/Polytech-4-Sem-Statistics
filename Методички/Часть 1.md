## Типы признаков / данных
В мире анализа данных и статистики, разнообразие типов признаков и данных играет важную роль в понимании и интерпретации информации. Признаки представляют собой характеристики или переменные, которые описывают объекты или события, а данные представляют собой значения или наблюдения этих признаков. От правильного определения типов признаков зависит выбор подходящих статистических методов и моделей для анализа данных.

В данной главе мы рассмотрим различные типы признаков и данных, которые широко используются в анализе данных. В данном случае под данными имеются ввиду переменные и наоборот. 

![[Типы данных.png]]

%%
![[Типы данных.canvas]]
%%
***

### Категориальные / Качественные признаки
**Категориальные / Качественные признаки** - это признаки каждое значение которых указывает на принадлежность объекта к определенной группе. Цифры в данном случае обозначают свойства объекта, служат маркерами, и не имеют математического смысла.

Категориальные / Качественные признаки, в свою очередь, можно поделить на **номинальные** и **порядковые**.
***
#### Номинальные признаки
**Номинальные признаки** применяются для обозначения категорий или признаков, которые нельзя классифицировать по возрастанию или убыванию, т.е они только содержат информацию о принадлежности объекта к какому-то классу.

Примеры:
- Группы крови (Каждой группе крови можно дать число обозначающее ее.)
- Типы горных пород и т.п. (Каждой горной породе можно дать число обозначающее ее.)
***
#### Порядковые / Ранговые признаки
**Порядковые / Ранговые признаки** отличаются от номинальных тем, что в них появляется отношения порядка. То есть здесь у нас значения не только разделяют объекты на классы, но и определенным образом упорядочивают их.

Примеры:
- Список участников забега (Список отражает кто из участиков быстрее, а кто медленнее, но не показывает на сколько быстрее или медленнее)
- Другие примеры в которых подразумевается сравнивание результатов
***

### Количественные / Числовые признаки
**Количественные / Числовые признаки** отображают количество чего-то. 

Их в свою очередь, можно поделить на **дискретные** и **непрерывные**.
***
#### Непрерывные признаки
Непрерывные признаки - это признаки, которые могут принимать любое значение из диапазона возможных значений.

К примеру $1, 2.3, 3.3, 4, 8 \frac{2}{3}, \dots$ или $[10, 30]$. 
***
#### Дискретные признаки
Дискретные признаки - это признаки, которые могут принимать только целые значения из ряда возможных значений.

К примеру $1, 2, 3, 4, \dots$

Такие переменные не могут быть дробными, то есть $3.5$ не дискретная переменная.

***

## Вариационный ряд
> Вариационный ряд представляет собой упорядоченный набор значений признака, а также соответствующие им частоты или количество наблюдений. 

Вариационный ряд состоит из следующих элементов:
- **Варианты** 
- **Абсолютные частоты** или **Относительные частоты**

Например, предположим, что у нас есть набор данных о возрасте людей, состоящий из следующих значений:

| Возраст | 32  | 28  | 25  | 40  | 32  | 30  | 25  | 28  |
| ------ | --- | --- | --- | --- | --- | --- | --- | --- |

```Python
data_sort = data.sort_values()  
print(data_sort.tolist())
```

```
[25, 25, 25, 28, 28, 30, 32, 32, 40]
```

%%
**Вариационный ряд с абсолютными частотам** и **Вариационный ряд с относительными частотами** для этого набора данных будет выглядеть следующим образом

| Варианты           | 25  | 28  | 30  | 32  | 40  |
| ------------------ |:---:|:---:|:---:|:---:|:---:|
| Абсолютные частоты |  3  |  2  |  1  |  2  |  1  |

| Варианты              |  25   |  28   |  30   |  32   |  40   |
| --------------------- |:-----:|:-----:|:-----:|:-----:|:-----:|
| Относительные частоты | 0.333 | 0.222 | 0.111 | 0.222 | 0.111 |

Рассмотрим каждый элемент вариационного ряда подробнее. 
%%

***
### Варианты
> В контексте статистики, термин **"варианты"** относится к уникальным значениям признака, распределенным в порядке возрастания

**Варианты** значений для данных о возрасте людей будут выглядеть следующим образом:

```Python
unique = sorted(data.unique())  
print(unique)
```

```
[25, 28, 30, 32, 40]
```
%%
| Варианты           | 25  | 28  | 30  | 32  | 40  |
| ------------------ |:---:|:---:|:---:|:---:|:---:|
%%
***
### Вариационный ряд с абсолютными частотам
> **Вариационный ряд с абсолютными частотами** представляет собой упорядоченный список значений признака вместе с соответствующими **абсолютными частотами**, которые показывают, сколько раз каждое значение встречается в наборе данных.

Для создания вариационного ряда с абсолютными частотами необходимо пройти по всем значениям признака и посчитать, сколько раз каждое значение появляется в данных. Затем значения признака упорядочиваются в порядке возрастания или убывания, а ряду присваиваются соответствующие абсолютные частоты.

```Python
freq = pd.Series(data_sort).value_counts().sort_index()  
freq = pd.DataFrame(freq, index=unique, columns=["Абсолютные частоты"]).T  
freq
```

|                    | 25  | 28  | 30  | 32  | 40  |
| ------------------ |:---:|:---:|:---:|:---:|:---:|
| Абсолютные частоты |  3  |  2  |  1  |  2  |  1  |

***
### Вариационный ряд с относительными частотам
> **Вариационный ряд с относительными частотами** представляет собой вариационный ряд, где вместо абсолютных частот используются относительные частоты. **Относительная частота** указывает на долю каждого значения признака относительно общего количества наблюдений.

Для создания вариационного ряда с относительными частотами необходимо разделить абсолютные частоты на общее количество наблюдений. Это позволяет нам получить представление о том, как часто каждое значение признака встречается относительно всего набора данных.

```Python
rel_freq = pd.Series(data_sort).value_counts().sort_index() / len(data_sort)  
rel_freq = pd.DataFrame(rel_freq, index=unique, columns=["Относительные частоты"]).T  
rel_freq
```

|                       |  25   |  28   |  30   |  32   |  40   |
| --------------------- |:-----:|:-----:|:-----:|:-----:|:-----:|
| Относительные частоты | 0.333 | 0.222 | 0.111 | 0.222 | 0.111 |

***

### Полигон абсолютных и относительных частот вариационного ряда
%%
## Полигон абсолютных и относительных частот вариационного ряда
%%

> Полигон абсолютных и относительных частот вариационного ряда является графическим представлением распределения значений признака и их соответствующих частот. Он помогает визуализировать данные и понять их распределение на графике.

Для полигона **абсолютных частот**, на оси абсцисс откладываются значения признака, а на оси ординат - абсолютные частоты, которые показывают, сколько раз каждое значение встречается в наборе данных. Затем точки с заданными координатами соединяются линиями, образуя полигон, который отображает вариации абсолютных частот признака.

```Python
fig = px.line(x=unique, y=freq.iloc[0], markers=True, title='Полигон частот вариационного ряда')  
fig.show()
```
![[newplot.png]]

Для полигона **относительных частот**, на оси абсцисс также откладываются значения признака, а на оси ординат - относительные частоты, которые показывают, какую долю составляет каждое значение от общего числа наблюдений. Относительные частоты обычно выражаются в виде десятичных долей или процентов. Затем точки с заданными координатами соединяются линиями, образуя полигон относительных частот.

```Python
fig = px.line(x=unique, y=rel_freq.iloc[0], markers=True, title='Полигон относительных частот вариационного ряда')  
fig.show()
```
![[newplot1.png]]

Построение полигона абсолютных и относительных частот позволяет визуально анализировать распределение значений признака и выявлять особенности, такие как пики, моды, симметрию или асимметрию в данных. Это помогает лучше понять характеристики набора данных и делать выводы о его распределении.

***

## Интервальный вариационный ряд
%%
интервальный ряд распределения относительных частот вариационного ряда и построить гистограмму интервального ряда относительных частот
%%

> Интервальный вариационный ряд является особым видом вариационного ряда. Вместо того, чтобы перечислять каждое отдельное значение признака, интервальный вариационный ряд группирует значения в заданные интервалы.

Интервальный вариационный ряд состоит из интервалов значений признака и их соответствующих частот (абсолютных или относительных). Каждый интервал представляет диапазон значений, в котором находятся наблюдаемые значения признака. Частота интервала указывает, сколько значений попадает в этот интервал.

### Количество интервалов
$$k = \lceil \log_2 n \rceil + 1$$
где 
- $n$ - количество элементов вариационного ряда,
- $k$ - количество интервалов.

```Python
k = int(np.ceil(np.log2(len(data_sort)) + 1))  
print(f'Количество интервалов: {k}')
```

### Шаг интервала
$$h = \frac{max(x) - min(x)}{k}$$
где
- $h$ - шаг интервала,
- $max(x)$ - максимальное значение вариационного ряда,
- $min(x)$ - минимальное значение вариационного ряда,
- $k$ - количество интервалов. 

```Python
h = (data_sort.max() - data_sort.min()) / k  
print(f'Шаг интервала: {h}')
```


### Интервальный вариационный ряд


```Python
intervals = pd.Series([data_sort.min() + i * delta for i in range(k+1)])  
print(intervals.tolist())
```

### Распределение абсолютных частот интервального вариационного ряда

```Python
freq_intervals = pd.Series(data_sort).value_counts(bins=8).sort_index().values  
freq_intervals = pd.DataFrame(freq_intervals, index=intervals_mean, columns=["Частота"]).T  
freq_intervals
```

### Распределение относительных частот интервального вариационного ряда

```Python
rel_intervals_freq = pd.Series(data_sort).value_counts(bins=8).sort_index().values / len(data_sort)  
rel_intervals_freq = pd.DataFrame(rel_intervals_freq, index=[f'{intervals[i]:.2f}-{intervals[i+1]:.2f}' for i in range(intervals.count()-1)], columns=["Относительная частота"]).T  
rel_intervals_freq
```

### Полигон абсолютных и относительных частот интервального вариационного ряда

```Python

```

## Эмпирическая функция распределения
%%
эмпирическую функцию распределения и построить график эмпирической функции распределения
%%

```Python
emp_func = rel_intervals_freq.iloc[0].cumsum()  
emp_func.name = "F*"  
emp_func = pd.DataFrame(emp_func, index=[f'{intervals[i]:.2f}-{intervals[i+1]:.2f}' for i in range(intervals.count()-1)]).T  
emp_func
```

## Среднее (Mean)
> **Среднее арифметическое** (Mean) - Cумма всех элементов исследования $y_1, y_2, \cdots , y_n$ деленная на их количество. Среднее значение набора измерений определяет **только лишь** центр распределения данных. Два набора измерений могут иметь очень разные частотные распределения, но равные средние. 

$$\overline x = \frac 1n \sum^n_{i=1} x_i$$
==где==
- $n$ - объем выборки, 
- $x_i$ - $i$-й элемент выборки

Среднее значение по **Генеральной совокупности** обозначается буквой $\mu$. Зачастую  $\mu$ это неизвестная константа которую мы бы хотели найти. 

Символ $\overline x$ в английском читается как "x bar" и обозначает **выборочное среднее**.

```Python
mean = np.mean(data)  
print(f'Выборочное среднее: {mean:.2f}')
```

## Дисперсия (Variance) 
> **Дисперсией случайной величины** называется математическое ожидание квадрата отклонения этой случайной величины от ее математического ожидания. Дисперсия (Variance) в статистике является мерой разброса или вариации данных относительно их среднего значения. Она показывает, насколько значения признака отклоняются от среднего значения.
> 
> **Пояснения:** Зачастую математическое ожидание и среднее по совокупности это одно и то же, поэтому в данном определении используется термин математического ожидания. 

Дисперсия по выборочной совокупности обозначается как $s^2$

$$s^2 = \frac1{n - 1} \sum^n_{i=1} (y_i - \bar y)^2$$

в то время как дисперсия по генеральной совокупности обозначается как $\sigma^2$

$$\sigma^2 = \frac1n \sum^n_{i=1} (y_i - \bar y)^2$$

==где $n$ - объем выборки, $x_i$ - элемент выборки, $\overline x$ - выборочное среднее, $s^2_x$ - выборочная дисперсия, $x_i - \overline x$ - отклонение элемента выборки от выборочного среднего.==

Дисперсия характеризует разброс случайной величины вокруг ее математического ожидания.

Корень из дисперсии называется стандартным отклонением.

```Python
var = np.var(data, ddof=1)  
print(f'Выборочная дисперсия: {var:.2f}')
```

## Стандартное / Среднеквадратическое отклонение (Standard deviation)
Стандартное отклонение, также известное как среднеквадратическое отклонение, является мерой разброса или вариации данных относительно их среднего значения. Оно позволяет оценить, насколько значения признака отклоняются от среднего и предоставляет информацию о степени разброса данных. Корень из дисперсии называется средним квадратичным отклонением. 

- Для выборочной совокупности $$s = \sqrt{s^2}$$ 
- Для генеральной совокупности  $$\sigma = \sqrt{\sigma^2}$$

```Python
std = np.std(data, ddof=1)  
print(f'Среднеквадратическое отклонение: {std:.2f}')
```

## Коэффициент вариации (Coefficient of Variation)
> Коэффициент вариации является статистической мерой относительной изменчивости данных, которая позволяет сравнивать степень изменчивости различных наборов данных, учитывая их среднее значение

$$CV = \frac{s}{\overline x} \cdot 100$$

```Python
cv = (std / mean) * 100  
print(f'Коэффицент вариации: {cv:.2f}')
```